{"ast":null,"code":"import React from 'react';\nimport { PopupStack } from '@workday/canvas-kit-popup-stack';\nexport var useAlwaysCloseOnOutsideClick = function (model, elemProps) {\n  if (elemProps === void 0) {\n    elemProps = {};\n  }\n\n  var onClick = React.useCallback(function (event) {\n    if (!model.state.stackRef.current) {\n      return;\n    }\n\n    if (!PopupStack.contains(model.state.stackRef.current, event.target)) {\n      model.events.hide();\n    }\n  }, [model.events, model.state.stackRef]);\n  var visible = model.state.visibility !== 'hidden';\n  React.useLayoutEffect(function () {\n    var _a;\n\n    if (!visible) {\n      return;\n    }\n\n    document.addEventListener('mousedown', onClick);\n    (_a = model.state.stackRef.current) === null || _a === void 0 ? void 0 : _a.setAttribute('data-behavior-click-outside-close', 'always');\n    return function () {\n      document.removeEventListener('mousedown', onClick);\n    };\n  }, [model.state.stackRef, visible, onClick]);\n  return elemProps;\n};","map":{"version":3,"sources":["/Users/janet.xuishi/node_modules/@workday/canvas-kit-react/dist/es6/popup/lib/hooks/useAlwaysCloseOnOutsideClick.js"],"names":["React","PopupStack","useAlwaysCloseOnOutsideClick","model","elemProps","onClick","useCallback","event","state","stackRef","current","contains","target","events","hide","visible","visibility","useLayoutEffect","_a","document","addEventListener","setAttribute","removeEventListener"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,iCAA3B;AACA,OAAO,IAAIC,4BAA4B,GAAG,UAAUC,KAAV,EAAiBC,SAAjB,EAA4B;AAClE,MAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,IAAAA,SAAS,GAAG,EAAZ;AAAiB;;AAC7C,MAAIC,OAAO,GAAGL,KAAK,CAACM,WAAN,CAAkB,UAAUC,KAAV,EAAiB;AAC7C,QAAI,CAACJ,KAAK,CAACK,KAAN,CAAYC,QAAZ,CAAqBC,OAA1B,EAAmC;AAC/B;AACH;;AACD,QAAI,CAACT,UAAU,CAACU,QAAX,CAAoBR,KAAK,CAACK,KAAN,CAAYC,QAAZ,CAAqBC,OAAzC,EAAkDH,KAAK,CAACK,MAAxD,CAAL,EAAsE;AAClET,MAAAA,KAAK,CAACU,MAAN,CAAaC,IAAb;AACH;AACJ,GAPa,EAOX,CAACX,KAAK,CAACU,MAAP,EAAeV,KAAK,CAACK,KAAN,CAAYC,QAA3B,CAPW,CAAd;AAQA,MAAIM,OAAO,GAAGZ,KAAK,CAACK,KAAN,CAAYQ,UAAZ,KAA2B,QAAzC;AACAhB,EAAAA,KAAK,CAACiB,eAAN,CAAsB,YAAY;AAC9B,QAAIC,EAAJ;;AACA,QAAI,CAACH,OAAL,EAAc;AACV;AACH;;AACDI,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCf,OAAvC;AACA,KAACa,EAAE,GAAGf,KAAK,CAACK,KAAN,CAAYC,QAAZ,CAAqBC,OAA3B,MAAwC,IAAxC,IAAgDQ,EAAE,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,EAAE,CAACG,YAAH,CAAgB,mCAAhB,EAAqD,QAArD,CAAzE;AACA,WAAO,YAAY;AACfF,MAAAA,QAAQ,CAACG,mBAAT,CAA6B,WAA7B,EAA0CjB,OAA1C;AACH,KAFD;AAGH,GAVD,EAUG,CAACF,KAAK,CAACK,KAAN,CAAYC,QAAb,EAAuBM,OAAvB,EAAgCV,OAAhC,CAVH;AAWA,SAAOD,SAAP;AACH,CAvBM","sourcesContent":["import React from 'react';\nimport { PopupStack } from '@workday/canvas-kit-popup-stack';\nexport var useAlwaysCloseOnOutsideClick = function (model, elemProps) {\n    if (elemProps === void 0) { elemProps = {}; }\n    var onClick = React.useCallback(function (event) {\n        if (!model.state.stackRef.current) {\n            return;\n        }\n        if (!PopupStack.contains(model.state.stackRef.current, event.target)) {\n            model.events.hide();\n        }\n    }, [model.events, model.state.stackRef]);\n    var visible = model.state.visibility !== 'hidden';\n    React.useLayoutEffect(function () {\n        var _a;\n        if (!visible) {\n            return;\n        }\n        document.addEventListener('mousedown', onClick);\n        (_a = model.state.stackRef.current) === null || _a === void 0 ? void 0 : _a.setAttribute('data-behavior-click-outside-close', 'always');\n        return function () {\n            document.removeEventListener('mousedown', onClick);\n        };\n    }, [model.state.stackRef, visible, onClick]);\n    return elemProps;\n};\n"]},"metadata":{},"sourceType":"module"}