{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport React from 'react';\nimport { createEventMap, useEventMap, assert } from '@workday/canvas-kit-react/common';\nimport { listEventMap, useListModel } from '../list/useListModel';\nexport var cursorEventMap = createEventMap()({\n  guards: __assign(__assign({}, listEventMap.guards), {\n    shouldGoTo: 'goTo'\n  }),\n  callbacks: __assign(__assign({}, listEventMap.callbacks), {\n    onGoTo: 'goTo'\n  })\n});\n\nvar getFirst = function (items) {\n  return items[0];\n};\n\nvar getLast = function (items) {\n  return items[items.length - 1];\n};\n\nexport var getItem = function (id, items) {\n  var item = id ? items.find(function (item) {\n    return item.id === id;\n  }) : getFirst(items);\n  assert(item, \"Item not found: \" + id);\n  return item;\n};\n\nvar getOffsetItem = function (offset) {\n  return function (id, items) {\n    var _a;\n\n    var item = getItem(id, items);\n    var currentIndex = items.findIndex(function (_a) {\n      var id = _a.id;\n      return item.id === id;\n    });\n    var nextIndex = currentIndex + offset;\n\n    if (nextIndex < 0) {\n      nextIndex = items.length - 1;\n    } else if (nextIndex >= items.length) {\n      nextIndex = 0;\n    }\n\n    var disabledAttribute = (_a = items[nextIndex].ref.current) === null || _a === void 0 ? void 0 : _a.getAttribute('disabled');\n\n    if (disabledAttribute !== null || disabledAttribute === 'false') {\n      return getOffsetItem(offset)(items[nextIndex].id, items);\n    }\n\n    return items[nextIndex];\n  };\n};\n\nexport var hasItems = function (items) {\n  return items.some(function (item) {\n    return item.ref.current;\n  });\n};\nexport var getNext = getOffsetItem(1);\nexport var getPrevious = getOffsetItem(-1);\nexport var useCursorModel = function (config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var orientation = React.useState(config.orientation || 'vertical')[0];\n\n  var _a = React.useState(''),\n      cursorId = _a[0],\n      setCursorId = _a[1];\n\n  var initialCurrentRef = React.useRef('');\n  var list = useListModel(config);\n\n  var state = __assign(__assign({}, list.state), {\n    orientation: orientation,\n    cursorId: cursorId\n  });\n\n  var events = useEventMap(cursorEventMap, state, config, __assign(__assign({}, list.events), {\n    registerItem: function (data) {\n      if (!initialCurrentRef.current) {\n        initialCurrentRef.current = data.item.id;\n        setCursorId(initialCurrentRef.current);\n      }\n\n      list.events.registerItem(data);\n    },\n    unregisterItem: function (data) {\n      if (state.cursorId === data.id && state.items.some(function (i) {\n        return i.ref.current !== null;\n      })) {\n        events.next();\n      }\n\n      list.events.unregisterItem(data);\n    },\n    goTo: function (_a) {\n      var id = _a.id;\n      setCursorId(id);\n    },\n    next: function () {\n      setCursorId(getNext(state.cursorId, state.items).id);\n    },\n    previous: function () {\n      setCursorId(getPrevious(state.cursorId, state.items).id);\n    },\n    first: function () {\n      setCursorId(getFirst(state.items).id);\n    },\n    last: function () {\n      setCursorId(getLast(state.items).id);\n    }\n  }));\n  return {\n    state: state,\n    events: events\n  };\n};","map":{"version":3,"sources":["/Users/janet.xuishi/node_modules/@workday/canvas-kit-react/dist/es6/tabs/lib/cursor/useCursorModel.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","createEventMap","useEventMap","assert","listEventMap","useListModel","cursorEventMap","guards","shouldGoTo","callbacks","onGoTo","getFirst","items","getLast","getItem","id","item","find","getOffsetItem","offset","_a","currentIndex","findIndex","nextIndex","disabledAttribute","ref","current","getAttribute","hasItems","some","getNext","getPrevious","useCursorModel","config","orientation","useState","cursorId","setCursorId","initialCurrentRef","useRef","list","state","events","registerItem","data","unregisterItem","next","goTo","previous","first","last"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from 'react';\nimport { createEventMap, useEventMap, assert, } from '@workday/canvas-kit-react/common';\nimport { listEventMap, useListModel, } from '../list/useListModel';\nexport var cursorEventMap = createEventMap()({\n    guards: __assign(__assign({}, listEventMap.guards), { shouldGoTo: 'goTo' }),\n    callbacks: __assign(__assign({}, listEventMap.callbacks), { onGoTo: 'goTo' }),\n});\nvar getFirst = function (items) {\n    return items[0];\n};\nvar getLast = function (items) {\n    return items[items.length - 1];\n};\nexport var getItem = function (id, items) {\n    var item = id ? items.find(function (item) { return item.id === id; }) : getFirst(items);\n    assert(item, \"Item not found: \" + id);\n    return item;\n};\nvar getOffsetItem = function (offset) { return function (id, items) {\n    var _a;\n    var item = getItem(id, items);\n    var currentIndex = items.findIndex(function (_a) {\n        var id = _a.id;\n        return item.id === id;\n    });\n    var nextIndex = currentIndex + offset;\n    if (nextIndex < 0) {\n        nextIndex = items.length - 1;\n    }\n    else if (nextIndex >= items.length) {\n        nextIndex = 0;\n    }\n    var disabledAttribute = (_a = items[nextIndex].ref.current) === null || _a === void 0 ? void 0 : _a.getAttribute('disabled');\n    if (disabledAttribute !== null || disabledAttribute === 'false') {\n        return getOffsetItem(offset)(items[nextIndex].id, items);\n    }\n    return items[nextIndex];\n}; };\nexport var hasItems = function (items) { return items.some(function (item) { return item.ref.current; }); };\nexport var getNext = getOffsetItem(1);\nexport var getPrevious = getOffsetItem(-1);\nexport var useCursorModel = function (config) {\n    if (config === void 0) { config = {}; }\n    var orientation = React.useState(config.orientation || 'vertical')[0];\n    var _a = React.useState(''), cursorId = _a[0], setCursorId = _a[1];\n    var initialCurrentRef = React.useRef('');\n    var list = useListModel(config);\n    var state = __assign(__assign({}, list.state), { orientation: orientation, cursorId: cursorId });\n    var events = useEventMap(cursorEventMap, state, config, __assign(__assign({}, list.events), { registerItem: function (data) {\n            if (!initialCurrentRef.current) {\n                initialCurrentRef.current = data.item.id;\n                setCursorId(initialCurrentRef.current);\n            }\n            list.events.registerItem(data);\n        },\n        unregisterItem: function (data) {\n            if (state.cursorId === data.id && state.items.some(function (i) { return i.ref.current !== null; })) {\n                events.next();\n            }\n            list.events.unregisterItem(data);\n        },\n        goTo: function (_a) {\n            var id = _a.id;\n            setCursorId(id);\n        },\n        next: function () {\n            setCursorId(getNext(state.cursorId, state.items).id);\n        },\n        previous: function () {\n            setCursorId(getPrevious(state.cursorId, state.items).id);\n        },\n        first: function () {\n            setCursorId(getFirst(state.items).id);\n        },\n        last: function () {\n            setCursorId(getLast(state.items).id);\n        } }));\n    return { state: state, events: events };\n};\n"]},"metadata":{},"sourceType":"module"}