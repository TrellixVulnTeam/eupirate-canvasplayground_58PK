{"ast":null,"code":"import * as React from 'react';\nimport uuid from 'uuid/v4';\nimport { useCloseOnEscape, useAlwaysCloseOnOutsideClick, usePopupModel } from '@workday/canvas-kit-react/popup';\n\nvar useIntentTimer = function (fn, waitMs) {\n  if (waitMs === void 0) {\n    waitMs = 0;\n  }\n\n  var timer = React.useRef();\n\n  var start = function () {\n    timer.current = window.setTimeout(fn, waitMs);\n  };\n\n  var clear = function () {\n    window.clearTimeout(timer.current);\n    timer.current = undefined;\n  };\n\n  React.useEffect(function () {\n    return function () {\n      window.clearTimeout(timer.current);\n    };\n  }, [timer]);\n  return {\n    start: start,\n    clear: clear\n  };\n};\n\nvar isInteractiveElement = function (element) {\n  var tagName = element.tagName.toLowerCase();\n  var tabIndex = element.getAttribute('tabindex');\n\n  switch (tagName) {\n    case 'button':\n    case 'input':\n    case 'select':\n    case 'textarea':\n    case 'details':\n      return true;\n\n    default:\n      return tabIndex ? Number(tabIndex) >= 0 : false;\n  }\n};\n\nexport function useTooltip(_a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.type,\n      type = _c === void 0 ? 'label' : _c,\n      _d = _b.titleText,\n      titleText = _d === void 0 ? '' : _d;\n\n  var mouseDownRef = React.useRef(false);\n  var popupModel = usePopupModel();\n\n  var _e = React.useState(null),\n      anchorElement = _e[0],\n      setAnchorElement = _e[1];\n\n  var id = React.useState(function () {\n    return uuid();\n  })[0];\n  var intentTimer = useIntentTimer(popupModel.events.hide, 100);\n\n  var onOpen = function () {\n    popupModel.events.show();\n    intentTimer.clear();\n  };\n\n  var onOpenFromTarget = function (event) {\n    setAnchorElement(event.currentTarget);\n    onOpen();\n  };\n\n  var onFocus = function (event) {\n    if (!mouseDownRef.current) {\n      onOpenFromTarget(event);\n    }\n\n    mouseDownRef.current = false;\n  };\n\n  var onMouseDown = function (event) {\n    mouseDownRef.current = true;\n\n    if (isInteractiveElement(event.currentTarget)) {\n      popupModel.events.hide();\n    }\n  };\n\n  useCloseOnEscape(popupModel);\n  useAlwaysCloseOnOutsideClick(popupModel);\n  var visible = popupModel.state.visibility !== 'hidden';\n  return {\n    targetProps: {\n      'aria-describedby': type === 'describe' && visible ? id : undefined,\n      'aria-label': type === 'label' ? titleText : undefined,\n      onMouseEnter: onOpenFromTarget,\n      onMouseLeave: intentTimer.start,\n      onMouseDown: onMouseDown,\n      onFocus: onFocus,\n      onBlur: intentTimer.start\n    },\n    popperProps: {\n      open: visible,\n      anchorElement: anchorElement,\n      ref: popupModel.state.stackRef\n    },\n    tooltipProps: {\n      id: type === 'describe' && visible ? id : undefined,\n      role: 'tooltip',\n      onMouseEnter: onOpen,\n      onMouseLeave: intentTimer.start\n    }\n  };\n}","map":{"version":3,"sources":["/Users/janet.xuishi/node_modules/@workday/canvas-kit-react/dist/es6/tooltip/lib/useTooltip.js"],"names":["React","uuid","useCloseOnEscape","useAlwaysCloseOnOutsideClick","usePopupModel","useIntentTimer","fn","waitMs","timer","useRef","start","current","window","setTimeout","clear","clearTimeout","undefined","useEffect","isInteractiveElement","element","tagName","toLowerCase","tabIndex","getAttribute","Number","useTooltip","_a","_b","_c","type","_d","titleText","mouseDownRef","popupModel","_e","useState","anchorElement","setAnchorElement","id","intentTimer","events","hide","onOpen","show","onOpenFromTarget","event","currentTarget","onFocus","onMouseDown","visible","state","visibility","targetProps","onMouseEnter","onMouseLeave","onBlur","popperProps","open","ref","stackRef","tooltipProps","role"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport uuid from 'uuid/v4';\nimport { useCloseOnEscape, useAlwaysCloseOnOutsideClick, usePopupModel, } from '@workday/canvas-kit-react/popup';\nvar useIntentTimer = function (fn, waitMs) {\n    if (waitMs === void 0) { waitMs = 0; }\n    var timer = React.useRef();\n    var start = function () {\n        timer.current = window.setTimeout(fn, waitMs);\n    };\n    var clear = function () {\n        window.clearTimeout(timer.current);\n        timer.current = undefined;\n    };\n    React.useEffect(function () {\n        return function () {\n            window.clearTimeout(timer.current);\n        };\n    }, [timer]);\n    return {\n        start: start,\n        clear: clear,\n    };\n};\nvar isInteractiveElement = function (element) {\n    var tagName = element.tagName.toLowerCase();\n    var tabIndex = element.getAttribute('tabindex');\n    switch (tagName) {\n        case 'button':\n        case 'input':\n        case 'select':\n        case 'textarea':\n        case 'details':\n            return true;\n        default:\n            return tabIndex ? Number(tabIndex) >= 0 : false;\n    }\n};\nexport function useTooltip(_a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.type, type = _c === void 0 ? 'label' : _c, _d = _b.titleText, titleText = _d === void 0 ? '' : _d;\n    var mouseDownRef = React.useRef(false);\n    var popupModel = usePopupModel();\n    var _e = React.useState(null), anchorElement = _e[0], setAnchorElement = _e[1];\n    var id = React.useState(function () { return uuid(); })[0];\n    var intentTimer = useIntentTimer(popupModel.events.hide, 100);\n    var onOpen = function () {\n        popupModel.events.show();\n        intentTimer.clear();\n    };\n    var onOpenFromTarget = function (event) {\n        setAnchorElement(event.currentTarget);\n        onOpen();\n    };\n    var onFocus = function (event) {\n        if (!mouseDownRef.current) {\n            onOpenFromTarget(event);\n        }\n        mouseDownRef.current = false;\n    };\n    var onMouseDown = function (event) {\n        mouseDownRef.current = true;\n        if (isInteractiveElement(event.currentTarget)) {\n            popupModel.events.hide();\n        }\n    };\n    useCloseOnEscape(popupModel);\n    useAlwaysCloseOnOutsideClick(popupModel);\n    var visible = popupModel.state.visibility !== 'hidden';\n    return {\n        targetProps: {\n            'aria-describedby': type === 'describe' && visible ? id : undefined,\n            'aria-label': type === 'label' ? titleText : undefined,\n            onMouseEnter: onOpenFromTarget,\n            onMouseLeave: intentTimer.start,\n            onMouseDown: onMouseDown,\n            onFocus: onFocus,\n            onBlur: intentTimer.start,\n        },\n        popperProps: {\n            open: visible,\n            anchorElement: anchorElement,\n            ref: popupModel.state.stackRef,\n        },\n        tooltipProps: {\n            id: type === 'describe' && visible ? id : undefined,\n            role: 'tooltip',\n            onMouseEnter: onOpen,\n            onMouseLeave: intentTimer.start,\n        },\n    };\n}\n"]},"metadata":{},"sourceType":"module"}