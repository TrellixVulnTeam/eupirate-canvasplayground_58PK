{"ast":null,"code":"var candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', 'iframe', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])'];\n\nfunction isHidden(node) {\n  return node.offsetParent === null || getComputedStyle(node).visibility === 'hidden';\n}\n\nfunction getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n\n  return undefined;\n}\n\nfunction isNotRadioOrTabbableRadio(node) {\n  if (node.tagName !== 'INPUT' || node.type !== 'radio' || !node.name) {\n    return true;\n  }\n\n  var radioScope = node.form || node.ownerDocument;\n\n  if (!radioScope) {\n    return false;\n  }\n\n  var radioSet = radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + node.name + '\"]');\n  var checked = getCheckedRadio(radioSet, node.form);\n  return checked === node || checked === undefined && radioSet[0] === node;\n}\n\nfunction getAllTabbingElements(parentElem) {\n  var _a;\n\n  var currentActiveElement = document.activeElement;\n  var tabbableNodes = parentElem.querySelectorAll(candidateSelectors.join(','));\n  var onlyTabbable = [];\n\n  var _loop_1 = function (i) {\n    var node = tabbableNodes[i];\n\n    if (currentActiveElement === node || !node.disabled && getTabIndex(node) > -1 && !isHidden(node) && isNotRadioOrTabbableRadio(node)) {\n      if (node instanceof HTMLIFrameElement) {\n        var iframeDoc_1 = (_a = node.contentWindow) === null || _a === void 0 ? void 0 : _a.document;\n\n        if (iframeDoc_1) {\n          var tabbableElementsInIframe = getAllTabbingElements(iframeDoc_1);\n\n          var handleKeyEvent_1 = function (event) {\n            var blocked = tabTrappingKey(event, iframeDoc_1, onlyTabbable);\n\n            if (blocked) {\n              iframeDoc_1.removeEventListener('keydown', handleKeyEvent_1);\n            }\n          };\n\n          iframeDoc_1.addEventListener('keydown', handleKeyEvent_1);\n          tabbableElementsInIframe.forEach(function (elem) {\n            onlyTabbable.push(elem);\n          });\n        }\n      } else {\n        onlyTabbable.push(node);\n      }\n    }\n  };\n\n  for (var i = 0; i < tabbableNodes.length; i++) {\n    _loop_1(i);\n  }\n\n  return onlyTabbable;\n}\n\nfunction tabTrappingKey(event, parentElem, onlyTabbable) {\n  if (onlyTabbable === void 0) {\n    onlyTabbable = null;\n  }\n\n  if (!event || event.key !== 'Tab') {\n    return;\n  }\n\n  if (!parentElem || !parentElem.contains) {\n    if (process && process.env.NODE_ENV === 'development') {\n      console.warn('focus-trap-js: parent element is not defined');\n    }\n\n    return false;\n  }\n\n  if (!parentElem.contains(event.target)) {\n    return false;\n  }\n\n  var allTabbingElements = onlyTabbable || getAllTabbingElements(parentElem);\n  var firstFocusableElement = allTabbingElements[0];\n  var lastFocusableElement = allTabbingElements[allTabbingElements.length - 1];\n\n  if (event.shiftKey && event.target === firstFocusableElement) {\n    lastFocusableElement.focus();\n    event.preventDefault();\n    return true;\n  } else if (!event.shiftKey && event.target === lastFocusableElement) {\n    firstFocusableElement.focus();\n    event.preventDefault();\n    return true;\n  }\n\n  return false;\n}\n\nfunction getTabIndex(node) {\n  var tabIndexAttr = parseInt(node.getAttribute('tabindex') || '', 10);\n\n  if (!isNaN(tabIndexAttr)) {\n    return tabIndexAttr;\n  }\n\n  if (isContentEditable(node)) {\n    return 0;\n  }\n\n  return node.tabIndex;\n}\n\nfunction isContentEditable(node) {\n  return node.getAttribute('contentEditable');\n}\n\ntabTrappingKey.isNotRadioOrTabbableRadio = isNotRadioOrTabbableRadio;\nexport { tabTrappingKey };","map":{"version":3,"sources":["/Users/janet.xuishi/node_modules/@workday/canvas-kit-react/dist/es6/popup/lib/hooks/focus-trap-js.js"],"names":["candidateSelectors","isHidden","node","offsetParent","getComputedStyle","visibility","getCheckedRadio","nodes","form","i","length","checked","undefined","isNotRadioOrTabbableRadio","tagName","type","name","radioScope","ownerDocument","radioSet","querySelectorAll","getAllTabbingElements","parentElem","_a","currentActiveElement","document","activeElement","tabbableNodes","join","onlyTabbable","_loop_1","disabled","getTabIndex","HTMLIFrameElement","iframeDoc_1","contentWindow","tabbableElementsInIframe","handleKeyEvent_1","event","blocked","tabTrappingKey","removeEventListener","addEventListener","forEach","elem","push","key","contains","process","env","NODE_ENV","console","warn","target","allTabbingElements","firstFocusableElement","lastFocusableElement","shiftKey","focus","preventDefault","tabIndexAttr","parseInt","getAttribute","isNaN","isContentEditable","tabIndex"],"mappings":"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","sourcesContent":["var candidateSelectors = [\n    'input',\n    'select',\n    'textarea',\n    'a[href]',\n    'button',\n    'iframe',\n    '[tabindex]',\n    'audio[controls]',\n    'video[controls]',\n    '[contenteditable]:not([contenteditable=\"false\"])',\n];\nfunction isHidden(node) {\n    return node.offsetParent === null || getComputedStyle(node).visibility === 'hidden';\n}\nfunction getCheckedRadio(nodes, form) {\n    for (var i = 0; i < nodes.length; i++) {\n        if (nodes[i].checked && nodes[i].form === form) {\n            return nodes[i];\n        }\n    }\n    return undefined;\n}\nfunction isNotRadioOrTabbableRadio(node) {\n    if (node.tagName !== 'INPUT' || node.type !== 'radio' || !node.name) {\n        return true;\n    }\n    var radioScope = node.form || node.ownerDocument;\n    if (!radioScope) {\n        return false;\n    }\n    var radioSet = radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + node.name + '\"]');\n    var checked = getCheckedRadio(radioSet, node.form);\n    return checked === node || (checked === undefined && radioSet[0] === node);\n}\nfunction getAllTabbingElements(parentElem) {\n    var _a;\n    var currentActiveElement = document.activeElement;\n    var tabbableNodes = parentElem.querySelectorAll(candidateSelectors.join(','));\n    var onlyTabbable = [];\n    var _loop_1 = function (i) {\n        var node = tabbableNodes[i];\n        if (currentActiveElement === node ||\n            (!node.disabled &&\n                getTabIndex(node) > -1 &&\n                !isHidden(node) &&\n                isNotRadioOrTabbableRadio(node))) {\n            if (node instanceof HTMLIFrameElement) {\n                var iframeDoc_1 = (_a = node.contentWindow) === null || _a === void 0 ? void 0 : _a.document;\n                if (iframeDoc_1) {\n                    var tabbableElementsInIframe = getAllTabbingElements(iframeDoc_1);\n                    var handleKeyEvent_1 = function (event) {\n                        var blocked = tabTrappingKey(event, iframeDoc_1, onlyTabbable);\n                        if (blocked) {\n                            iframeDoc_1.removeEventListener('keydown', handleKeyEvent_1);\n                        }\n                    };\n                    iframeDoc_1.addEventListener('keydown', handleKeyEvent_1);\n                    tabbableElementsInIframe.forEach(function (elem) {\n                        onlyTabbable.push(elem);\n                    });\n                }\n            }\n            else {\n                onlyTabbable.push(node);\n            }\n        }\n    };\n    for (var i = 0; i < tabbableNodes.length; i++) {\n        _loop_1(i);\n    }\n    return onlyTabbable;\n}\nfunction tabTrappingKey(event, parentElem, onlyTabbable) {\n    if (onlyTabbable === void 0) { onlyTabbable = null; }\n    if (!event || event.key !== 'Tab') {\n        return;\n    }\n    if (!parentElem || !parentElem.contains) {\n        if (process && process.env.NODE_ENV === 'development') {\n            console.warn('focus-trap-js: parent element is not defined');\n        }\n        return false;\n    }\n    if (!parentElem.contains(event.target)) {\n        return false;\n    }\n    var allTabbingElements = onlyTabbable || getAllTabbingElements(parentElem);\n    var firstFocusableElement = allTabbingElements[0];\n    var lastFocusableElement = allTabbingElements[allTabbingElements.length - 1];\n    if (event.shiftKey && event.target === firstFocusableElement) {\n        lastFocusableElement.focus();\n        event.preventDefault();\n        return true;\n    }\n    else if (!event.shiftKey && event.target === lastFocusableElement) {\n        firstFocusableElement.focus();\n        event.preventDefault();\n        return true;\n    }\n    return false;\n}\nfunction getTabIndex(node) {\n    var tabIndexAttr = parseInt(node.getAttribute('tabindex') || '', 10);\n    if (!isNaN(tabIndexAttr)) {\n        return tabIndexAttr;\n    }\n    if (isContentEditable(node)) {\n        return 0;\n    }\n    return node.tabIndex;\n}\nfunction isContentEditable(node) {\n    return node.getAttribute('contentEditable');\n}\ntabTrappingKey.isNotRadioOrTabbableRadio = isNotRadioOrTabbableRadio;\nexport { tabTrappingKey };\n"]},"metadata":{},"sourceType":"module"}