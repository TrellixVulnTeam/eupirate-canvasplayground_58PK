{"ast":null,"code":"import React from 'react';\nimport { PopupStack } from '@workday/canvas-kit-popup-stack';\nexport var useCloseOnEscape = function (model, elemProps) {\n  if (elemProps === void 0) {\n    elemProps = {};\n  }\n\n  var onKeyDown = React.useCallback(function (event) {\n    if ((event.key === 'Esc' || event.key === 'Escape') && PopupStack.isTopmost(model.state.stackRef.current)) {\n      model.events.hide({\n        event: event\n      });\n    }\n  }, [model.state.stackRef, model.events]);\n  var visible = model.state.visibility !== 'hidden';\n  React.useLayoutEffect(function () {\n    if (!visible) {\n      return;\n    }\n\n    document.addEventListener('keydown', onKeyDown);\n    return function () {\n      document.removeEventListener('keydown', onKeyDown);\n    };\n  }, [onKeyDown, visible]);\n  return elemProps;\n};","map":{"version":3,"sources":["/Users/janet.xuishi/node_modules/@workday/canvas-kit-react/dist/es6/popup/lib/hooks/useCloseOnEscape.js"],"names":["React","PopupStack","useCloseOnEscape","model","elemProps","onKeyDown","useCallback","event","key","isTopmost","state","stackRef","current","events","hide","visible","visibility","useLayoutEffect","document","addEventListener","removeEventListener"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,iCAA3B;AACA,OAAO,IAAIC,gBAAgB,GAAG,UAAUC,KAAV,EAAiBC,SAAjB,EAA4B;AACtD,MAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,IAAAA,SAAS,GAAG,EAAZ;AAAiB;;AAC7C,MAAIC,SAAS,GAAGL,KAAK,CAACM,WAAN,CAAkB,UAAUC,KAAV,EAAiB;AAC/C,QAAI,CAACA,KAAK,CAACC,GAAN,KAAc,KAAd,IAAuBD,KAAK,CAACC,GAAN,KAAc,QAAtC,KACAP,UAAU,CAACQ,SAAX,CAAqBN,KAAK,CAACO,KAAN,CAAYC,QAAZ,CAAqBC,OAA1C,CADJ,EACwD;AACpDT,MAAAA,KAAK,CAACU,MAAN,CAAaC,IAAb,CAAkB;AAAEP,QAAAA,KAAK,EAAEA;AAAT,OAAlB;AACH;AACJ,GALe,EAKb,CAACJ,KAAK,CAACO,KAAN,CAAYC,QAAb,EAAuBR,KAAK,CAACU,MAA7B,CALa,CAAhB;AAMA,MAAIE,OAAO,GAAGZ,KAAK,CAACO,KAAN,CAAYM,UAAZ,KAA2B,QAAzC;AACAhB,EAAAA,KAAK,CAACiB,eAAN,CAAsB,YAAY;AAC9B,QAAI,CAACF,OAAL,EAAc;AACV;AACH;;AACDG,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqCd,SAArC;AACA,WAAO,YAAY;AACfa,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwCf,SAAxC;AACH,KAFD;AAGH,GARD,EAQG,CAACA,SAAD,EAAYU,OAAZ,CARH;AASA,SAAOX,SAAP;AACH,CAnBM","sourcesContent":["import React from 'react';\nimport { PopupStack } from '@workday/canvas-kit-popup-stack';\nexport var useCloseOnEscape = function (model, elemProps) {\n    if (elemProps === void 0) { elemProps = {}; }\n    var onKeyDown = React.useCallback(function (event) {\n        if ((event.key === 'Esc' || event.key === 'Escape') &&\n            PopupStack.isTopmost(model.state.stackRef.current)) {\n            model.events.hide({ event: event });\n        }\n    }, [model.state.stackRef, model.events]);\n    var visible = model.state.visibility !== 'hidden';\n    React.useLayoutEffect(function () {\n        if (!visible) {\n            return;\n        }\n        document.addEventListener('keydown', onKeyDown);\n        return function () {\n            document.removeEventListener('keydown', onKeyDown);\n        };\n    }, [onKeyDown, visible]);\n    return elemProps;\n};\n"]},"metadata":{},"sourceType":"module"}